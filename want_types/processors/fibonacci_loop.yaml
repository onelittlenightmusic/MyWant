wantType:
  metadata:
    name: fibonacci loop
    title: Fibonacci Loop Processor
    description: 'Processor for feedback-loop based Fibonacci number generation. Receives

      seeds from fibonacci_source_loop and computes subsequent Fibonacci numbers

      using closure/closure pattern for recursive computation.


      Implements the iterative computation phase of the fibonacci_loop pattern

      where computation continues until the specified maximum count is reached.

      '
    version: '1.0'
    category: mathematics
    pattern: processor
  parameters: []
  state:
  - name: prev
    description: Previous Fibonacci number in sequence
    type: int
    persistent: true
    example: 144
  - name: current
    description: Current Fibonacci number
    type: int
    persistent: true
    example: 233
  - name: position
    description: Current position in sequence
    type: int
    persistent: true
    example: 12
  - name: maxCount
    description: Target count from seed signal
    type: int
    persistent: true
    example: 15
  - name: processed
    description: Number of values computed
    type: int
    persistent: true
    example: 13
  - name: initialized
    description: Whether seeds have been received
    type: bool
    persistent: true
    example: true
  - name: total_processed
    description: Total count of computations
    type: int
    persistent: true
    example: 13
  connectivity:
    inputs:
    - name: seed_stream
      type: want
      description: Initial seeds and max count from source
      required: true
    outputs:
    - name: number_stream
      type: want
      description: Computed Fibonacci numbers
  agents: []
  constraints:
  - description: Must receive seed input
    validation: connected to fibonacci_source_loop
  - description: Computation continues until max_count reached
    validation: position <= maxCount
  examples:
  - name: Compute Loop-Based Fibonacci
    description: Compute Fibonacci using loop closure
    params: {}
    expectedBehavior: '1. Receives seed 0 at position 0

      2. Receives seed 1 at position 1

      3. Receives max_count signal (e.g., 15)

      4. Computes positions 2-14: 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377

      5. Sends each computed value

      6. Sends end signal

      '
    connectedTo:
    - fibonacci source loop
    - fibonacci_merger
  relatedTypes:
  - fibonacci source loop
  - fibonacci_merger
  - fibonacci_computer
  seeAlso:
  - Fibonacci closure pattern
  - Iterative loop computation
  - Feedback-based processing
  usageLimit:
    providers:
      min: 1
      max: 1
    users:
      min: 1
      max: -1
require: providers_and_users
