wantType:
  metadata:
    name: "fibonacci source loop"
    title: "Fibonacci Loop Source"
    description: |
      Generator that produces initial Fibonacci seed values (0, 1) and maximum
      count signal for downstream loop-based Fibonacci computation. Part of the
      fibonacci_loop pattern for recursive/iterative computation.

      This is the entry point for feedback-loop based Fibonacci generation where
      result feeds back for further computation.

    version: "1.0"
    category: "mathematics"
    pattern: "generator"

  parameters:
    - name: "max_count"
      description: "Maximum Fibonacci numbers to compute"
      type: "int"
      default: 15
      required: false
      validation:
        min: 1
        max: 100
      example: 20

  state:
    - name: "completed"
      description: "Whether seeds have been generated"
      type: "bool"
      persistent: true
      example: true

    - name: "total_processed"
      description: "Count of seed values sent"
      type: "int"
      persistent: true
      example: 2

  connectivity:
    inputs: []

    outputs:
      - name: "seed_stream"
        type: "want"
        description: "FibonacciSeed values with position and end signal"

  agents: []

  constraints:
    - description: "Max count must be positive"
      validation: "max_count > 0"

  examples:
    - name: "Generate 15 Fibonacci"
      description: "Seeds for computing 15 Fibonacci numbers"
      params:
        max_count: 15
      expectedBehavior: |
        1. Generator sends seed 0 at position 0
        2. Sends seed 1 at position 1
        3. Sends end marker with max_count=15
        4. Downstream computer uses for loop-based computation
      connectedTo: ["fibonacci_computer", "fibonacci_merger"]

    - name: "Generate 30 Fibonacci"
      description: "Larger set of Fibonacci computation"
      params:
        max_count: 30
      expectedBehavior: |
        1. Sends initial seeds 0, 1
        2. Sends max_count signal
        3. Computer loops to generate 30 values
      connectedTo: ["fibonacci_computer"]

  relatedTypes:
    - "fibonacci_computer"
    - "fibonacci_merger"
    - "fibonacci numbers"

  seeAlso:
    - "Fibonacci loop pattern"
    - "Feedback loop computation"
