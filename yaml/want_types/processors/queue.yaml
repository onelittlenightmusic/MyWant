wantType:
  metadata:
    name: queue
    title: Queue
    description: FIFO queue with configurable service time for processing items
    version: '1.0'
    category: queue
    pattern: processor
  parameters:
  - name: service_time
    description: Time to process each item in seconds
    type: float64
    default: 0.1
    required: false
    validation:
      min: 0.01
      max: 3600
    example: 0.1
  - name: max_queue_size
    description: Maximum items in queue (-1 = unlimited)
    type: int
    default: -1
    required: false
    validation:
      min: -1
    example: 1000
  - name: priority_mode
    description: Whether to prioritize items (FIFO or priority)
    type: string
    default: fifo
    required: false
    validation:
      enum:
      - fifo
      - priority
  state:
  - name: processed_count
    description: Total items processed since startup
    type: int
    persistent: true
    initialValue: 0
    example: 1000
  - name: avg_wait_time
    description: Average time items wait in queue (alias for average_wait_time)
    type: float64
    persistent: true
    initialValue: 0.0
    example: 0.5
  - name: average_wait_time
    description: Average time items wait in queue
    type: float64
    persistent: true
    initialValue: 0.0
    example: 0.5
  - name: total_processed
    description: Total items processed (same as processed_count)
    type: int
    persistent: true
    initialValue: 0
    example: 1000
  - name: total_wait_time
    description: Total accumulated wait time
    type: float64
    persistent: true
    initialValue: 0.0
    example: 50.0
  - name: last_packet_wait_time
    description: Wait time of the last processed packet
    type: float64
    persistent: true
    initialValue: 0.0
    example: 0.1
  - name: current_server_free_time
    description: Current server free time
    type: float64
    persistent: true
    initialValue: 0.0
    example: 1.5
  - name: completed
    description: Whether queue processing has completed
    type: bool
    persistent: true
    initialValue: false
    example: true
  - name: achieving_percentage
    description: Progress percentage toward completion
    type: int
    persistent: true
    initialValue: 0
    example: 100
  agents: []
  constraints:
  - description: Service time must be positive
    validation: service_time > 0
  - description: Max queue size must be positive or -1 (unlimited)
    validation: max_queue_size > 0 or max_queue_size == -1
  examples:
  - name: Basic queue processing
    description: Queue with 0.1s service time
    expectedBehavior: Items flow through queue, each taking 0.1s to process
    want:
      metadata:
        name: basic-queue-processing
        type: queue
        labels: {}
      spec:
        params:
          service_time: 0.1
  - name: Slow queue
    description: Queue with 0.5s service time (simulation of slower processor)
    expectedBehavior: Items queue up and wait for processing with longer delays
    want:
      metadata:
        name: slow-queue
        type: queue
        labels: {}
      spec:
        params:
          service_time: 0.5
          max_queue_size: 500
  - name: High-throughput queue
    description: Fast queue for quick item processing
    expectedBehavior: Items process very quickly with large queue buffer
    want:
      metadata:
        name: high-throughput-queue
        type: queue
        labels: {}
      spec:
        params:
          service_time: 0.01
          max_queue_size: 10000
  - name: Queue with strict size limit
    description: Queue that discards items when full
    expectedBehavior: Items beyond 100 are rejected/discarded
    want:
      metadata:
        name: queue-with-strict-size-limit
        type: queue
        labels: {}
      spec:
        params:
          service_time: 0.2
          max_queue_size: 100
  relatedTypes:
  - numbers
  - combiner
  - sink
  - fibonacci filter
  - prime sequence
  seeAlso:
  - queue-system recipe
  - qnet-pipeline recipe
  - qnet-using recipe
  require:
    type: providers_and_users
    providers:
    - name: input
      type: want
      description: Items to queue for processing
      required: true
    users:
    - name: output
      type: want
      description: Processed items (after service_time delay)
