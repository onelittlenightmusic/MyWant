recipe:
  metadata:
    name: "Travel Budget System"
    description: "Travel planning with budget tracking - aggregates costs from restaurant and hotel reservations"
    custom_type: "travel budget system"
    category: "travel"
    version: "1.0.0"

  parameters:
    prefix: "budget-travel"
    budget: 5000.0
    currency: USD
    restaurant_type: "fine dining"
    hotel_type: "luxury"
    restaurant_cost: 300.0
    hotel_cost: 800.0

  parameter_descriptions:
    prefix: "Prefix used for naming wants in the generated deployment"
    budget: "Total travel budget amount"
    currency: "Currency code for budget tracking"
    restaurant_type: "Type of restaurant to book"
    hotel_type: "Type of hotel accommodation"
    restaurant_cost: "Estimated restaurant cost"
    hotel_cost: "Estimated hotel cost"

  wants:
    # Budget tracker - aggregates costs from child wants
    - metadata:
        type: budget
        labels:
          role: tracker
          category: finance
      spec:
        params:
          budget: budget
          currency: currency

    # Restaurant reservation with cost reporting
    - metadata:
        type: restaurant
        labels:
          role: scheduler
          category: dining
      spec:
        params:
          restaurant_type: restaurant_type
          cost: restaurant_cost

    # Hotel reservation with cost reporting
    - metadata:
        type: hotel
        labels:
          role: scheduler
          category: accommodation
      spec:
        params:
          hotel_type: hotel_type
          cost: hotel_cost

  # Coordinator-level state fields: MergeParentState aggregation + computeTemplateResult output
  state:
    - name: costs
      description: "Map of child want names to their reported costs"
      type: map
    - name: total_cost
      description: "Total aggregated cost"
      type: float64
    - name: remaining_budget
      description: "Budget minus total cost"
      type: float64
    - name: result
      description: "Primary result summary (first result entry)"
      type: string
    - name: budget_budget_summary
      description: "Budget tracking summary from budget want"
      type: string
    - name: restaurant_final_result
      description: "Restaurant reservation result"
      type: string
    - name: hotel_final_result
      description: "Hotel booking result"
      type: string

  finalResultField: result

  result:
    - want_name: "budget"
      state_field: "budget_summary"
      description: "Budget tracking summary"
    - want_name: "restaurant"
      state_field: "final_result"
      description: "Restaurant reservation result"
    - want_name: "hotel"
      state_field: "final_result"
      description: "Hotel booking result"
