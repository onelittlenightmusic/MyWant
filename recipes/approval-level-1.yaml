recipe:
  # Recipe metadata - defines Level 1 approval system
  metadata:
    name: "Level 1 Approval"
    description: "Level 1 approval workflow coordinator with Level 2 approval as child"
    custom_type: "level 1 approval"
    version: "1.0.0"

  # Recipe parameters - configurable values for approval process
  parameters:
    approval_id: "approval-001"
    coordinator_type: "level1"
    level2_authority: "senior_manager"

  wants:
    # Level 1 Coordinator - connects to evidence and description via recipeAgent
    - metadata:
        type: level1_coordinator
        labels:
          role: coordinator
          category: approval-coordinator
          component: level1-coordinator
          approval_level: "1"
      spec:
        params:
          approval_id: approval_id
          coordinator_type: coordinator_type
      recipeAgent: true  # Automatically connects to evidence + description wants

    # Level 2 Approval as child - created after Level 1 completes
    # This is a custom target type that will load approval-level-2.yaml recipe
    - metadata:
        type: "level 2 approval"  # Matches custom_type in approval-level-2.yaml
        labels:
          role: approval-target
          approval_level: "2"
          parent_approval_level: "1"
      spec:
        params:
          approval_id: approval_id
          coordinator_type: "level2"
          level2_authority: level2_authority

  # Recipe result definition
  result:
    - want_name: "level1_coordinator"
      stat_name: ".approval_status"
      description: "Level 1 approval status"
    - want_name: "level2_approval"
      stat_name: ".final_approval_status"
      description: "Level 2 final approval status"