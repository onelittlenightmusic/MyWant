recipe:
  # Recipe metadata - defines this as a custom target type with agent integration
  metadata:
    name: "Dynamic Travel Change with Flight API"
    description: "Travel planning with API-based flight booking, automatic monitoring, and delay-triggered rebooking"
    custom_type: "dynamic travel change"
    category: "travel"
    version: "2.0.0"

  # Recipe parameters - these are the configurable values
  parameters:
    prefix: "travel"
    display_name: "Dynamic Travel Itinerary with Flight Monitoring"
    server_url: "http://localhost:8081"
    flight_number: "AA100"
    flight_type: "business class"
    from: "New York"
    to: "Los Angeles"
    departure_date: "2026-12-20"
    restaurant_type: "fine dining"
    hotel_type: "luxury"
    buffet_type: "international"
    dinner_duration: 2.0
    flight_duration: 12.0

  # Parameter descriptions - explain what each parameter does
  parameter_descriptions:
    prefix: "Prefix used for naming wants in the generated deployment"
    display_name: "Display name for the dynamic travel itinerary"
    server_url: "URL of the flight API server for booking"
    flight_number: "Flight number to book"
    flight_type: "Class of service (e.g., business class, economy)"
    from: "Departure city"
    to: "Destination city"
    departure_date: "Flight departure date in YYYY-MM-DD format"
    restaurant_type: "Type of restaurant to book"
    hotel_type: "Type of hotel accommodation"
    buffet_type: "Type of buffet for breakfast"
    dinner_duration: "Expected duration of dinner in hours"
    flight_duration: "Expected duration of flight in hours"

  wants:
    # Flight booking with API agent - monitors and auto-reboks on delay
    - metadata:
        type: flight
        labels:
          role: scheduler
          category: flight-api
      spec:
        params:
          server_url: server_url
          flight_number: flight_number
          flight_type: flight_type
          from: from
          to: to
          departure_date: departure_date
          duration_hours: flight_duration
        requires:
          - create_flight

    # Dinner restaurant reservation with agent processing
    - metadata:
        type: restaurant
        labels:
          role: scheduler
      spec:
        params:
          restaurant_type: restaurant_type
          duration_hours: dinner_duration
        requires:
          - restaurant_reservation

    # Hotel accommodation booking with agent processing
    - metadata:
        type: hotel
        labels:
          role: scheduler
      spec:
        params:
          hotel_type: hotel_type
        requires:
          - hotel_reservation

    # Morning breakfast buffet with agent processing
    - metadata:
        type: buffet
        labels:
          role: scheduler
      spec:
        params:
          buffet_type: buffet_type
        requires:
          - buffet_reservation

    # Travel coordinator that combines all schedules
    - metadata:
        type: coordinator
        labels:
          role: orchestrator
      spec:
        params:
          display_name: display_name
          required_inputs: 4
          completion_timeout: 10  # Wait time for delayed packets like flight rebooking
        using:
          - role: scheduler

  # Recipe result definition - specifies how to compute travel planning results
  result:
    - want_name: "coordinator"
      stat_name: ".coordinator_result"
      description: "Travel coordinator result with inputs"
    - want_name: "coordinator"
      stat_name: ".finalResult"
      description: "Travel itinerary summary timeline"
    - want_name: "coordinator"
      stat_name: ".total_processed"
      description: "Total travel bookings coordinated"
    - want_name: "flight"
      stat_name: ".total_processed"
      description: "Flight bookings completed"
    - want_name: "restaurant"
      stat_name: ".total_processed"
      description: "Restaurant reservations completed"
    - want_name: "hotel"
      stat_name: ".total_processed"
      description: "Hotel bookings completed"
    - want_name: "buffet"
      stat_name: ".total_processed"
      description: "Buffet reservations completed"
  # Example deployment - one-click deployment configuration
  example:
    wants:
      - metadata:
          name: "dynamic-travel-change-demo"
          type: "dynamic travel change"
          labels:
            recipe: "Dynamic Travel Change with Flight API"
        spec:
          params: {}
